" IntelliJ - IdeaVimプラグイン用の設定
" $HOME/.ideavimrcに配置するとIntelliJ起動時にloadされる

" vimrcと共通のkeymap等は切り出すことが可能
"source .vimrc.keymap

"see following actions list of ideavim
" `:actionlist [keymap]`

" ノーマルモードではIMEをオフ(効いてない可能性)
set keep-english-in-normal
" クリップボードを有効化
set clipboard=unnamedplus

" <Space> をリーダーキーにする
let mapleader = " "

""""""""""""""""""""""""""""""""""
" 一般設定                       "
""""""""""""""""""""""""""""""""""
vnoremap ,a :action GottoAction<CR>
" 全ての場所から曖昧検索
nnoremap ,e :action SearchEverywhere<CR>
" ファイルの構造をポップアップ画面で表示する
nnoremap ,s :action FileStructurePopup<CR>
" パス限定曖昧検索ポップアップを表示する
nnoremap ,g :action FindInPath<CR>
" 最近開いたファイル一覧ポップアップを表示する
nnoremap ,r :action RecentFiles<CR>
" 呼び出し階層一覧viewを表示
nnoremap ,c :action CallHierarchy<CR>
" 水平分割
nnoremap <C-s> :action MoveTabDown<CR>
" 垂直分割
nnoremap <C-v> :action MoveTabRight<CR>

""""""""""""""""""""""""""""""""""
" コードジャンプ系のコマンド定義 "
""""""""""""""""""""""""""""""""""
" 定義へのジャンプ
nnoremap gd :action GotoDeclaration<CR>
" スーパーメソッドへジャンプ
nnoremap gs :action GotoSuperMethod<CR>
" 実装箇所へジャンプ
nnoremap gi :action GotoImplementation<CR>
" 曖昧ファイル検索
nnoremap gf :action GotoFile<CR>
" 直近の変更箇所へジャンプ
nnoremap gb :action JumpToLastChange<CR>
" 呼び出し箇所一覧をあいまい検索
nnoremap gr :action ShowUsages<CR>
" 呼び出し箇所を検索
nnoremap gR :action FindUsages<CR>
" テスト実装箇所へジャンプ
nnoremap gt :action GotoTest<CR>

""""""""""""""""""""""""""""""""""
" エディター (コード編集)        "
""""""""""""""""""""""""""""""""""
" ブックマークリストを表示
nnoremap <C-b><C-m> :action ShowBookmarks<CR>
" カーソル行でブックマークをトグル
nnoremap mm :action ToggleBookmark<CR>
" 次の分割グループへ移動
nnoremap <S-l> :action NextSplitter<CR>
" 前の分割グループへ移動
nnoremap <S-h> :action PrevSplitter<CR>

" /による検索はIDE側のものを使う
nnoremap / :<C-u>action Find<CR>

""""""""""""""""""""""""""""""""""
" 実行                           "
""""""""""""""""""""""""""""""""""
" 実行の構成を選んで実行
noremap RC :action ChooseRunConfiguration<CR>

""""""""""""""""""""""""""""""""""
" Window(View)操作               "
""""""""""""""""""""""""""""""""""
" フォーカスを持つエディタタブを水平分割する
nnoremap <C-s> :split<CR>
" フォーカスを持つエディタタブを垂直分割
nnoremap <C-v> :vsplit<CR>
" フォーカスを持つエディタタブを他のタブ分割グループに移動
noremap so :action MoveEditorToOppositeTabGroup<CR>

""""""""""""""""""""""""""""""""""
" IdeaVim Plugin
""""""""""""""""""""""""""""""""""

" easymotion plugin
Plug easymotion/vim-easymotion
set easymotion
" デフォルトのキーマップを無効化
let g:EasyMotion_do_mapping = 0
" 大文字小文字を区別しない
let g:EasyMotion_smartcase = 1

nmap <Leader> <Plug>(easymotion-prefix)
" カーソル以降の単語の先頭にジャンプ
nmap <Leader>w <Plug>(easymotion-wl)
" カーソル以前の単語の先頭にジャンプ
nmap <Leader>b <Plug>(easymotion-bl)
" カーソル以降の単語の末尾にジャンプ
nmap <Leader>e <Plug>(easymotion-el)
" カーソル以前の単語の末尾にジャンプ
nmap <Leader>ge <Plug>(easymotion-ge)
" カーソル以降の行の先頭にジャンプ
nmap <Leader>j <Plug>(easymotion-j)
" カーソル以前の行の先頭にジャンプ
nmap <Leader>k <lug>(easymotion-k)

" which-key plugin
" NOTE: install by plugin marketplace
set which-key
" disable the timeout option
set notimeout
"
